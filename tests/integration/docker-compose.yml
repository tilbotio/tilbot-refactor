services:
  npm-ci:
    extends:
      file: ../../docker-compose.yml
      service: npm-ci
  frontend:
    extends:
      file: ../../docker-compose.yml
      service: frontend
    depends_on:
      npm-ci:
        condition: service_completed_successfully
  backend:
    extends:
      file: ../../docker-compose.yml
      service: backend
    depends_on:
      npm-ci:
        condition: service_completed_successfully
  mongo:
    image: mongo
    ports:
    - 27017:27017
    restart: unless-stopped
    environment:
      MONGO_INITDB_DATABASE: tilbot